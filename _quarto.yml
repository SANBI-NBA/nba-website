project:
  type: website
  
website:
  title: "National Biodiversity Assessment"
  favicon: imgs/sanbi-icon.png
  search:
    location: sidebar
    type: textbox
  page-navigation: true
  back-to-top-navigation: true
  navbar:
    logo: imgs/sanbi-logo-medium.png
    pinned: true
    tools:
      - icon: imgs/sanbi-icon.png
        href: https://www.sanbi.org/
      - icon: twitter
        href: https://x.com/sanbi_za
      - icon: facebook
        href: https://www.facebook.com/SouthAfricanNationalBiodiversityInstitute/
      - icon: linkedin
        href: https://www.linkedin.com/in/sa-biodiversity-south-african-national-biodiversity-institute-9444b7140/
      - icon: github
        href: https://github.com/SANBI-NBA
  sidebar:
    title: "Contents"
    style: "floating"
    contents:
      - text: "Home"
        href: index.qmd
    alignment: center
    collapse-level: 1

editor: visual

csl: sanbi.csl
footnotes-hover: true
reference-location: document
link-external-newwindow: true
callout-icon: false

language:
  section-title-footnotes: Notes

execute:
  echo: false 
  warning: false 
  message: false

format: 
  html:
    template-partials:
      - partials/title-metadata.html
      - partials/_title-meta-author.html
    theme: 
      - default 
      - custom.scss    
    crossref:
      fig-prefix: Figure
      fig-title: Figure
      tbl-prefix: Table
      tbl-title: Table
      ref-hyperlink: true
      fig-labels: arabic
      tbl-labels: arabic
      subref-labels: alpha a
      title-delim: \.
    include-after-body: # Some random code to make the fig & table caption labels bold
      text: |
        <script>
          document.addEventListener("DOMContentLoaded", () => {
              document.querySelectorAll("figcaption").forEach(e => {
                  const text = e.innerHTML.trim();
                  // Only proceed if it starts with "Figure" or "Table"
                  if (/^(Figure|Table)\b/.test(text)) {
                    const match = text.match(/^([^<]*?\.)\s*(.*)$/s); // Match up to first period before any tag
                  if (match) {
                    const strongPart = `<strong>${match[1]}</strong>`;
                    const rest = match[2];
                    e.innerHTML = `${strongPart} ${rest}`;
                  }
                }
              });
          });
        </script>   
    include-in-header: # This fixes the breadcrumb text colours
      - text: |
          <style>
          @media (min-width: 992px) { /* because the bread crumbs are only on the banner on large screens */
            .breadcrumb li a {
              color: white !important;
            }
          }
          </style>
    toc: true
    toc-location: right
    toc-depth: 4
    toc-expand: true
    link-external-newwindow: true
