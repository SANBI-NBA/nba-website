---
# indentations are critical in YAML headers, be careful when editing this section

title: "Wetland ecological condition" # Compulsory
subtitle: "Freshwater (inland aquatic) realm" # Optional: delete if you are not using a subtitle

title-block-banner: "#4097C2" #Background colour of the title block: Apply component colours where necessary - find hex codes in _brand.yml
title-block-banner-color: white # Header text colour: DO NOT CHANGE

# List authors here in the order you want them displayed in the title block
# See examples in README
author:
  # Copy this block and add details for each author of your page. Make sure you maintain indentations exactly as they are here
  - name:
      given: Nacelle B.
      family: Collins 
    orcid: 0000-0000-0000-0000  
    affiliations:
      - ref: destea 
      # If an author has more than one affiliation, add more - ref: lines here
  - name:
      given: Nancy
      family: Job
    orcid: 0000-0000-0000-0000  
    affiliations:
      - ref: sanbi 
  - name:
      given: Adwoa 
      family: Awuah 
    orcid: 0000-0002-4929-7592 
    affiliations:
      - ref: sanbi 
  - name:
      given: Ryan 
      family: Kok 
    orcid: 0000-0000-0000-0000  
    affiliations:
      - ref: ecopulse 
  - name:
      given: Phumla
      family: Mayekiso
    orcid: 0000-0000-0000-0000  
    affiliations:
      - ref: sanbi 
  - name:
      given: Jock
      family: Currie
    orcid: 0000-0000-0000-0000  
    affiliations:
      - ref: sanbi
  - name:
      given: Dean 
      family: Ollis 
    orcid: 0000-0002-4929-7592 
    affiliations:
      - ref: inlandwaters
  - name:
      given: Donovan 
      family: Kotze 
    orcid: 000-0000-0000-0000 
    affiliations:
      - ref: ukzn    
      
affiliations:
# List affiliations here and number them in the order that they are associated with the list of authors above. If multiple authors have the same affiliation, only list the affiliation once here.
# Write out institutional names in full
# See README for common examples - they can be copied and pasted here
# Make sure you maintain indentations exactly as they are here
  - id: destea 
    number: 1      
    name: Free State Department of Economic, Small Business Development, Tourism and Environmental Affairs
  - id: sanbi 
    number: 2 
    name: South African National Biodiversity Institute
  - id: ecopulse 
    number: 3 
    name: EcoPulse 
  - id: inlandwaters 
    number: 4
    name: Inland Waters
  - id: ukzn 
    number: 5 
    name: University of KwaZulu-Natal

# This date determines the PUBLISHED date in the title block
date: last-modified

# Remember to rename the default .bib file and change the name here
bibliography: fw-references.bib

# This section sets up the page citation format. DO NOT EDIT
citation:
  type: webpage
  container-title: National Biodiversity Assessment 2025
  publisher: South African National Biodiversity Institute
  url: http://nba.sanbi.org.za/
# Do not edit or change any of the following entries
appendix-cite-as: false
google-scholar: true
---

*While numerous policies and strategies aim to improve or at least stabilise the ecological condition of wetlands in South Africa, overall wetland condition continues to deteriorate. Continued wetland loss and declining ecological condition has led to significant ecological and financial loss. This deterioration is often gradual and 'out of sight' and, therefore, generally not perceived as an immediate threat. It is, however, a serious concern which should be addressed through restoration (where feasible and strategic) and improved, frequent, monitoring and reporting.*

![Musa Mlambo from the Albany Museum surveying a wetland for aquatic invertebrates, Eastern Cape highlands. (© Nancy Job)](imgs/musa_ECGNP.png)

------------------------------------------------------------------------

::::: columns
::: {.column width="50%"}
<center>

| [49%]{.inline-style-not-protected}
| of wetland extent
| Natural or Near-natural

</center>
:::

::: {.column width="50%"}
<center>

| [58%]{.inline-style-well-protected}
| of 171 303 inland wetlands
| Natural or Near-natural

</center>
:::
:::::

:::: columns
::: {.column width="50%"}
:::
::::

------------------------------------------------------------------------

:::: panel-tabset
## Map

![Ecological condition for inland wetland ecosystem types. The inset graph shows percentage of ecosystem extent within each condition category.](imgs/wet_condition_map.png){#fig-condition_wet_map}

## Data

<!-- ::: {#table-1 .table style="height:500px;overflow-y: auto"} -->

::: {.table style="height:500px;overflow-y: auto"}
```{r}
#| label: tbl-wetland_condition_bytype
#| tbl-cap: Ecological condition of inland wetland ecosystem types. Note that extent figures have been rounded.
#| classes: plain

# library(tidyverse)
library(stringr)
library(dplyr)
library(nbaR)
library(gt) # library(reactable)


## load data
condition_tbl <- read.csv(file=list.files(pattern = "^wetlands_condition_combined_extent_percent_by_type.csv$", recursive = TRUE, full.names = TRUE), stringsAsFactors = FALSE, check.names = FALSE) #

## create the table
tbl <- condition_tbl %>% 
  mutate(metric = str_replace_all(metric, "extent", "Extent  (km<sup>2</sup>)"),
         metric = str_replace_all(metric, "percent", "Percentage")) %>% 
  arrange(type) %>% 
  select(type, metric, 'Natural', 'Near-natural', 'Moderately modified', 'Heavily modified', 'Severely modified', 'Critically modified') %>%
  mutate(across(where(is.numeric), round)) %>% 
  gt::gt(
    rowname_col = "metric",
    groupname_col = "type",
    row_group_as_column = TRUE) %>% 
  fmt_number(
    columns = where(is.numeric),
    decimals = 0,
    sep_mark = "\u202F") %>% 
  fmt_markdown(columns = metric) %>%  # tells gt to render HTML/Markdown in that column
  nbaR::nba_tbl_theme(HEADER = "Freshwater") %>% 
  tab_style(
    style = cell_text(color = "white"),
    locations = cells_column_labels()
  )

tbl

# create the table
# with reactable()
# tbl <- condition_tbl %>% 
#   mutate(metric = str_replace_all(metric, "extent", "Extent  (km<sup>2</sup>)"),
#          metric = str_replace_all(metric, "percent", "Percentage")) %>% 
#   arrange(type) %>% 
#   select(type, metric, 'Natural', 'Near-natural', 'Moderately modified', 'Heavily modified', 'Severely modified', 'Critically modified') %>%
#   mutate(across(where(is.numeric), round)) %>% 
#   reactable(
#   filterable = TRUE,
#   searchable = FALSE,
#   pagination = FALSE,
#   height = 600,
#   defaultColDef = colDef(
#     headerStyle = list(background = "#02268A", color = "white", fontWeight = "bold")
#   ),
#   theme = reactableTheme(
#     inputStyle = list(
#       color = "black", # create black searching text in the filter box, otherwise one doesn't see it!
#       backgroundColor = "white",
#       border = "1px solid #ccc"
#     )))
# tbl

```
:::

Download the data by wetland type [here](data/wetlands_condition_combined_extent_percent_by_type.csv).
::::

Approximately 1 476 561 ha (49%) of total inland wetland extent is in a natural (class A) or near -natural (class B) condition, 808 325 ha (27%) is in a moderately modified (class C) condition, and 705 797 ha (27%) is in a heavily to critically modified (class D, E or F) condition.

Ecological condition was calculated for 171 303 wetlands. Of these, approximately 100 029 wetlands (58%) are in a natural (class A) or near-natural (class B) condition, 24 752 (14%) are in a moderately modified (class C) condition and 46 522 (24%) are in a heavily to critically modified (class D, E or F) condition.

Of the different hydrogeomorphological types, depression wetlands are in the best ecological condition, with 76% in a natural or near-natural condition, with 11% moderately modified and 14% in a heavily to critically modified condition. Floodplain, unchannelled valley-bottom, and seep wetlands have 34%, 35%, 42% of their extent in natural or near-natural ecological condition.

:::: panel-tabset
## Figure

<!-- it is important to use second-level headings in panel tabsets, i.e. two hashes -->

```{r}
#| label: fig-wetland_condition_bargraph
#| fig-cap: "Inland wetland ecological condition according to hydrogeomorphological (HGM) category, showing the percentage of wetland extent (km^2^). 'Valley-bottom' represents the 'Unchannelled valley-bottom' HGM category."

library(tidyverse)
library(stringr)
library(nbaR)

## load data
condition_tbl <- read.csv(file=list.files(pattern = "^wetlands_condition_combined_extent_percent.csv$", recursive = TRUE, full.names = TRUE), stringsAsFactors = FALSE, check.names = FALSE) %>%
  mutate(zone = factor(zone, levels = c("Depression", "Seep", "Unchannelled valley-bottom", "Floodplain"))) # first depression then seep then unchannelled valley-bottom, then floodplain last , "Total count", "Total extent"

condition_tbl %>% 
  filter(metric == "percent") %>% 
  arrange(desc(zone)) %>% 
  # rename the long unchannelled valley-bottom
  mutate(zone = str_replace_all(zone, "Unchannelled valley-bottom","Valley-bottom")) %>%
  # rename the two columns we're going to sum so that they can be excluded after summing
  # rename(severe = `Severely modified`,
  #        critical = `Critically modified`) %>% 
  # mutate(`Severely modified` = `Severely modified` + `Critically modified`,
  #        `Critically modified` = 0) %>%
  select(zone, Natural, `Near-natural`, `Moderately modified`, `Heavily modified`, `Severely modified`, `Critically modified`) %>% # 
  # round the percentages
  mutate(across(where(is.numeric), ~ round(., digits=0))) %>% 
  nba_plot(
    GROUPS=zone,
    COLS=Natural:`Critically modified`,
    CHRT = "bar",
    NUM = TRUE,
    LAB = "Percentage of ecosystem extent",
    SAVE = NULL) +
  theme(plot.margin=grid::unit(c(0,43,0,0), "pt")) # need large righ margin to avoid cutting off the legend text; could be reduced if we merge groups? top, right, bottom, and left margins

```

## Data

::: {#table .table style="height:500px;overflow-y: auto"}
```{r}
#| label: tbl-wetland_condition
#| tbl-cap: Ecological condition of inland wetland ecosystem types summarised by HGM category. Note that extent figures have been rounded.
#| classes: plain

library(dplyr)
library(nbaR)
library(gt)

## create the table

tbl <- condition_tbl %>% 
  mutate(metric = str_replace_all(metric, "extent", "Extent  (km<sup>2</sup>)"),
         metric = str_replace_all(metric, "percent", "Percentage")) %>% 
  arrange(zone) %>% 
  select(zone, metric, 'Natural', 'Near-natural', 'Moderately modified', 'Heavily modified', 'Severely modified', 'Critically modified') %>%
  mutate(across(where(is.numeric), round)) %>% 
  gt::gt(
    rowname_col = "metric",
    groupname_col = "zone",
    row_group_as_column = TRUE) %>% 
  fmt_number(
    columns = where(is.numeric),
    decimals = 0,
    sep_mark = "\u202F") %>% 
  fmt_markdown(columns = metric) %>%  # tells gt to render HTML/Markdown in that column
  nbaR::nba_tbl_theme(HEADER = "Freshwater") %>% 
  tab_style(
    style = cell_text(color = "white"),
    locations = cells_column_labels()
  )

tbl

```
:::

Download the data [here](data/wetlands_condition_combined_extent_percent.csv).
::::

## Approach {#cond}

Wetlands are complex systems that are influenced by multiple biotic and abiotic factors. Determining wetland health therefore requires a multidisciplinary approach that will allow for determining a single condition score from all the influencing factors. While previous approaches to determine wetland condition were sound, they lacked the holistic and systematic characteristics of the WET-Health Level 1A approach [@macfarlane2020].

Wetland ecological condition was determined using an automated approach (ArcGIS python scripts) of the Level 1A method described by MacFarlane et al. (2020), which is a low confidence, non-detailed approach that is suitable for assessing multiple wetlands such as those of a national wetland inventory. In addition to being typed according to Ollis et al. (2013) [@ollis2013], the method also requires each wetland to have a 200 m buffer, as well as have its area of influence mapped. While the 200 m buffer is created by the automated process, the area of influence was created using a separate, but also automated, process. This allows the area of influence to be the actual wetland catchment.

Overall wetland condition was calculated from the combined state of wetland hydrology, water quality, geomorphology, and vegetation, which were all calculated from the inferred pressures of different land cover classes.

While allowing for a systematic assessment of wetland condition, the Level 1A approach also allows for the inclusion of in-field validated expert data, a process that has already been initiated through numerous expert engagements during which spatial extent, typing, and wetland condition data were captured for individual wetlands and wetland complexes. Such expert data, along with the Level 1A assessment, contributes towards an improved approach for national wetland condition assessment by building a reference dataset that will directly and indirectly inform future PES assessments.

In addition to allowing for the rapid assessment of multiple wetlands, the automation of a standardised wetland condition assessment method also provides opportunity for future temporal analysis by using land cover grids from different periods as input data. The results will not only reveal the change in wetland condition over time, but also the pressures responsible for such changes.

### Future steps

The automated wetland ecological condition is a major step forward in reproducibility and an opportunity for ongoing improvement. It mirrors the categories and framework adopted by practitioners undertaking assessments in the field and sets in place great potential for teasing out drivers of degradation from the perspective of wetland hydrology, water quality, geomorphology or vegetation change, and the development of specific management responses. Going forward, work remains for wide expert engagement to continue inform future wetland ecological condition assessments.

## Technical documentation

Coming soon

**Related publications and supporting information**

Coming soon

## Recommended citation

```{r}
#| output: asis
#| label: lst-citation-code

library(nbaR) 
library(knitr)
library(rmarkdown)

# Code for fetching the yaml metadata
# Note that this only runs when the .qmd file is rendered, therefore the outputs of this code block will return no results if you try to run it within R - that does not mean it is not working

meta <- knitr::opts_knit$get("rmarkdown.pandoc.to")  # forces knitr to load metadata
meta <- rmarkdown::metadata  # full YAML is now in `meta`

nba_citation(meta)
```

## References

::: {#refs}
:::
